<!DOCTYPE html><html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title>The Kubernetes Conundrum</title><style>
      * {
        font-family: Georgia, Cambria, "Times New Roman", Times, serif;
      }
      html, body {
        margin: 0;
        padding: 0;
      }
      h1 {
        font-size: 50px;
        margin-bottom: 17px;
        color: #333;
      }
      h2 {
        font-size: 24px;
        line-height: 1.6;
        margin: 30px 0 0 0;
        margin-bottom: 18px;
        margin-top: 33px;
        color: #333;
      }
      h3 {
        font-size: 30px;
        margin: 10px 0 20px 0;
        color: #333;
      }
      header {
        width: 640px;
        margin: auto;
      }
      section {
        width: 640px;
        margin: auto;
      }
      section p {
        margin-bottom: 27px;
        font-size: 20px;
        line-height: 1.6;
        color: #333;
      }
      section img {
        max-width: 640px;
      }
      footer {
        padding: 0 20px;
        margin: 50px 0;
        text-align: center;
        font-size: 12px;
      }
      .aspectRatioPlaceholder {
        max-width: auto !important;
        max-height: auto !important;
      }
      .aspectRatioPlaceholder-fill {
        padding-bottom: 0 !important;
      }
      header,
      section[data-field=subtitle],
      section[data-field=description] {
        display: none;
      }
      </style></head><body><article class="h-entry">
<header>
<h1 class="p-name">The Kubernetes Conundrum</h1>
</header>
<section data-field="subtitle" class="p-summary">
Naming the whale in the room
</section>
<section data-field="body" class="e-content">
<section name="98d5" class="section section--body section--first section--last"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><h3 name="02ef" id="02ef" class="graf graf--h3 graf--leading graf--title">The Kubernetes Conundrum</h3><h4 name="77c4" id="77c4" class="graf graf--h4 graf-after--h3 graf--subtitle">The whale in the room</h4><p name="c0ab" id="c0ab" class="graf graf--p graf-after--h4">Kubernetes is hot right now. <a href="https://aws.amazon.com/eks/?sc_channel=PS&amp;sc_campaign=acquisition_UK&amp;sc_publisher=google&amp;sc_medium=ACQ-P%7CPS-GO%7CBrand%7CDesktop%7CSU%7CCompute%7CEKS%7CUK%7CEN%7CText&amp;sc_content=Kubernetes_e&amp;sc_detail=amazon%20kubernetes&amp;sc_category=Compute&amp;sc_segment=293651686750&amp;sc_matchtype=e&amp;sc_country=UK&amp;s_kwcid=AL!4422!3!293651686750!e!!g!!amazon%20kubernetes&amp;ef_id=CjwKCAiA5qTfBRAoEiwAwQy-6RRAy5BI9xOSsa1exW725v20VFw_oeMCh4fUQCl_ZWMShEPXCJgbzRoCOr0QAvD_BwE:G:s" data-href="https://aws.amazon.com/eks/?sc_channel=PS&amp;sc_campaign=acquisition_UK&amp;sc_publisher=google&amp;sc_medium=ACQ-P%7CPS-GO%7CBrand%7CDesktop%7CSU%7CCompute%7CEKS%7CUK%7CEN%7CText&amp;sc_content=Kubernetes_e&amp;sc_detail=amazon%20kubernetes&amp;sc_category=Compute&amp;sc_segment=293651686750&amp;sc_matchtype=e&amp;sc_country=UK&amp;s_kwcid=AL!4422!3!293651686750!e!!g!!amazon%20kubernetes&amp;ef_id=CjwKCAiA5qTfBRAoEiwAwQy-6RRAy5BI9xOSsa1exW725v20VFw_oeMCh4fUQCl_ZWMShEPXCJgbzRoCOr0QAvD_BwE:G:s" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">AWS has it</a>, <a href="https://cloud.google.com/kubernetes-engine/" data-href="https://cloud.google.com/kubernetes-engine/" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">Google Cloud has it</a>, <a href="https://azure.microsoft.com/en-gb/services/kubernetes-service/" data-href="https://azure.microsoft.com/en-gb/services/kubernetes-service/" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">Azure has it</a>, <a href="https://www.digitalocean.com/products/kubernetes/" data-href="https://www.digitalocean.com/products/kubernetes/" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">DigitalOcean is doing it</a>, heck even <a href="https://www.ibm.com/cloud/container-service" data-href="https://www.ibm.com/cloud/container-service" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">IBM is throwing its (red) hat in the ring</a>. I’m still trying to answer a nagging question: what problem does it really solve and who actually has that problem? In theory I get it. In practice <a href="https://dictionary.cambridge.org/dictionary/english/ymmv" data-href="https://dictionary.cambridge.org/dictionary/english/ymmv" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">YMMV</a>.</p><figure name="b731" id="b731" class="graf graf--figure graf-after--p"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 394px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 56.3%;"></div><img class="graf-image" data-image-id="1*vZY_ED4qWxETbEI8ceObLg.jpeg" data-width="3840" data-height="2160" data-is-featured="true" src="https://cdn-images-1.medium.com/max/800/1*vZY_ED4qWxETbEI8ceObLg.jpeg"></div><figcaption class="imageCaption">Photo by <a href="https://unsplash.com/photos/ZsOcHVjgkfQ" data-href="https://unsplash.com/photos/ZsOcHVjgkfQ" class="markup--anchor markup--figure-anchor" rel="noopener" target="_blank">Michael Liao</a></figcaption></figure><p name="e8c9" id="e8c9" class="graf graf--p graf-after--figure">I saw <a href="https://en.wikipedia.org/wiki/Information_superhighway" data-href="https://en.wikipedia.org/wiki/Information_superhighway" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">The Information Superhighway</a> come and go. It was true, but useless. It’s now so part of the fabric of life that hyping it would at best gain you kindly condescending looks. I saw the long, slow insistence that was <a href="https://en.wikipedia.org/wiki/Java_Platform,_Enterprise_Edition" data-href="https://en.wikipedia.org/wiki/Java_Platform,_Enterprise_Edition" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">J2EE</a>. Again, half true, mostly just too <a href="https://carb.onl/complicated" data-href="https://carb.onl/complicated" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">complicated</a> to be worth it. A decade or more of death-march projects, billions spent (<a href="https://www.softwareadvisoryservice.com/en/blog/biggest-uk-government-project-failures/" data-href="https://www.softwareadvisoryservice.com/en/blog/biggest-uk-government-project-failures/" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">most publicly in government</a>) a handful of surviving systems remain, encrusting organisations legacy IT estates. Taking the name of <em class="markup--em markup--p-em">Best Practice</em> in vain didn’t get us much <em class="markup--em markup--p-em">value for money</em>.</p><p name="9d9c" id="9d9c" class="graf graf--p graf-after--p">Take your pick from the last decade: <a href="https://en.wikipedia.org/wiki/Big_data" data-href="https://en.wikipedia.org/wiki/Big_data" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">big data</a>, <a href="https://en.wikipedia.org/wiki/Blockchain" data-href="https://en.wikipedia.org/wiki/Blockchain" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">blockchain</a>, <a href="https://en.wikipedia.org/wiki/Artificial_intelligence" data-href="https://en.wikipedia.org/wiki/Artificial_intelligence" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">AI</a>, the <a href="https://whatis.techtarget.com/definition/Gartner-hype-cycle" data-href="https://whatis.techtarget.com/definition/Gartner-hype-cycle" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">hype cycle</a> is rarely wanting for a parade of colourful characters. <em class="markup--em markup--p-em">Expensive</em>, colourful characters. Peddled by the serious, earnest, tailors that have made emperors’ clothes for over a century.</p><p name="b541" id="b541" class="graf graf--p graf-after--p">Occasionally these characters have substance. More usually the early corporate adopters in the sales cycle marry in haste and repent at leisure. Shiny new things open up to reveal a couple of years of painful implementation detail. Eventually they’re quietly dropped and replaced by commoditised, boring solutions because a new rising star now twinkles over the “Peak of Inflated Expectations”.</p><p name="4dba" id="4dba" class="graf graf--p graf-after--p">It’s an exhausting catherine-wheel of strategic great white hopes, always just over the horizon and out of reach. <a href="https://en.wikipedia.org/wiki/Where_Have_All_the_Flowers_Gone%3F" data-href="https://en.wikipedia.org/wiki/Where_Have_All_the_Flowers_Gone%3F" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">When will they ever learn</a>? <a href="https://medium.com/@alixtrot/technical-intuition-instincts-in-a-digital-world-a6bfda669a91" data-href="https://medium.com/@alixtrot/technical-intuition-instincts-in-a-digital-world-a6bfda669a91" class="markup--anchor markup--p-anchor" target="_blank">Technical intuition</a> would be a life-saver here.</p><h4 name="805b" id="805b" class="graf graf--h4 graf-after--p">Substance</h4><p name="843f" id="843f" class="graf graf--p graf-after--h4">The real trick is spotting the black sheep in the enterprise herd: the one that’s going in the right direction. Fifteen years ago <a href="https://www.vmware.com/uk.html" data-href="https://www.vmware.com/uk.html" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">VMware</a> revolutionised datacentres with virtualisation. I was there, it was brilliant. The legacy of that quantum leap lives on in <a href="https://aws.amazon.com/ec2/" data-href="https://aws.amazon.com/ec2/" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">ec2</a> and <a href="https://cloud.google.com/compute/" data-href="https://cloud.google.com/compute/" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">compute engine</a> instances. Provisioning a server used to take 3–6 months, with a mosaic of logistics and people. Now servers appear and disappear by the thousands, second by second, with little more than the click of a mouse or the flicker of an <a href="https://en.wikipedia.org/wiki/Web_API" data-href="https://en.wikipedia.org/wiki/Web_API" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">API</a> call. That’s hard value.</p><blockquote name="2b7d" id="2b7d" class="graf graf--pullquote graf-after--p">Virtualisation may be commoditised now, but it’s the foundation of our cloud world.</blockquote><p name="7d5a" id="7d5a" class="graf graf--p graf-after--pullquote">Five years ago, <a href="https://www.docker.com/" data-href="https://www.docker.com/" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">Docker</a> opened a door to the next level, bringing containers to the mainstream. If virtualisation was able to multiply the efficiency of hardware, saving a ton of energy in the process, containers are now able multiply the effectiveness of each virtual machine. No longer do you have to operate one server per task, or die trying to contort those tasks into a single monolithic, monolingual J2EE server. The right tool for the job is no longer a top-down least-worst compromise decision to be enforced across the board. Each container can now make the right decisions to meet its task.</p><h4 name="e9b3" id="e9b3" class="graf graf--h4 graf-after--p">Enter Kubernetes</h4><p name="5d8d" id="5d8d" class="graf graf--p graf-after--h4">Containers were so successful, so useful, so <em class="markup--em markup--p-em">valuable</em> that, almost as soon as the world started using them, it became clear there was a need to automate deploying, monitoring, scaling and updating them. If containers are the ingredients, Kubernetes is the chef. To serve a tasty meal, you’re going to need some skills to put those flavours to work.</p><p name="c8e6" id="c8e6" class="graf graf--p graf-after--p">The story goes that Google had been using containers back when the rest of the IT world was still peddling around the back yard with its training wheels on, busily writing Gantt charts and convening <a href="http://www.itilnews.com/index.php?pagename=ITIL_Change_Advisory_Board_Is_it_killing_your_Business" data-href="http://www.itilnews.com/index.php?pagename=ITIL_Change_Advisory_Board_Is_it_killing_your_Business" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">Change Advisory Boards</a> in the hope of progress, while Google, as part of a new generation of companies, was quietly racing ahead, putting aside <a href="https://corporate-rebels.com/mindset/" data-href="https://corporate-rebels.com/mindset/" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">traditional best practice</a> and instead powerfully combining deep technical expertise with smart business thinking.</p><p name="0eae" id="0eae" class="graf graf--p graf-after--p">Legend has it that Google developed <a href="https://john.e-wilkes.com/papers/2015-EuroSys-Borg.pdf" data-href="https://john.e-wilkes.com/papers/2015-EuroSys-Borg.pdf" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">Borg</a>, an automated system that could take a containerised task (or workload) and schedule it to run somewhere across their vast estate of computing power. It’s this idea, that an organisation could run a single homogenous farm of computing resource and use an automated system to sow workloads neatly across that wide field, that gave rise to Kubernetes — and Kubernetes is currently riding the hype cycle.</p><h4 name="5770" id="5770" class="graf graf--h4 graf-after--p">The conundrum</h4><p name="ee8f" id="ee8f" class="graf graf--p graf-after--h4"><a href="https://en.wikipedia.org/wiki/From_a_Distance" data-href="https://en.wikipedia.org/wiki/From_a_Distance" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">From a distance</a> the world looks blue and green, and the snow capped mountains white. The 10,000ft view is beautiful. It makes perfect sense to distribute all your organisation’s workloads across a standardised pool of compute resource. At least, it does if you’re Google. <em class="markup--em markup--p-em">The truism is you’re not</em>.</p><p name="0ab0" id="0ab0" class="graf graf--p graf-after--p">Technology is honest. In hubris, in theory and in meetings, it’s possible to fudge things a little, bend the rules, fluff up inconvenient truths and paint rosy cheeks with a dash of buzzy makeup. Technology, however, is the five year old in the room saying “but that man smells and he has no hair”. Perfectly innocent, technically correct, highly embarrassing, painfully honest. Your technology won’t bend to your strategy.</p><blockquote name="34eb" id="34eb" class="graf graf--pullquote graf-after--p">Here’s the root problem: Kubernetes isn’t massively good at isolating one workload from another.</blockquote><p name="3ce2" id="3ce2" class="graf graf--p graf-after--pullquote">If one task decides to take all the compute duvet in the middle of the night, the others are left shivering in the cold and the system goes down. You have to think about partitioning networking, avoiding privilege escalations, keeping rogue workloads from roaming around looking for ways to subvert the platform. These turn out to be more difficult, less obvious and more confusingly unclear than you’d like. To get to one platform that’s fit to run them all, you have to start <a href="https://seths.blog/2005/03/dont_shave_that/" data-href="https://seths.blog/2005/03/dont_shave_that/" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">yak-shaving</a>. That may be OK, but bear in mind <a href="https://twitter.com/copyconstruct/status/1020880388464377856" data-href="https://twitter.com/copyconstruct/status/1020880388464377856" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">it could well take a dedicated team many months to not quite get there</a>. That’s a lot of time-to-market and budget spent. You’re not Google.</p><p name="8ec9" id="8ec9" class="graf graf--p graf-after--p">There’s an easy answer though. If you’re trying to separate workloads and you want to “limit the blast radius” in case one of them blows up, you could “just” build multiple Kubernetes platforms. Each product or service gets its own platform, neatly partitioned away from the others. Using auto-scaling cloud infrastructure, each individual Kubernetes cluster can scale up and down to meet demand.</p><p name="fc14" id="fc14" class="graf graf--p graf-after--p">There are flies in this ointment, (e.g. <a href="https://en.wikipedia.org/wiki/Bin_packing_problem" data-href="https://en.wikipedia.org/wiki/Bin_packing_problem" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">bin-packing</a> efficiency) but they don’t necessarily spoil the soup if you can swallow them. The real killer is “incidental complexity”. When you consider that Kubernetes is a behemoth of a platform, running a single platform for a single behemoth of an organisation, say Google, makes sense. One massive container ship can carry a lot of cargo. But now we’re looking at a fleet of container ships and only lightly loading them with a few containers. There’s a massive operational overhead in running a fleet like that, so perhaps, in fact, the better option is to simply run your workloads on a few dedicated servers.</p><h4 name="69f6" id="69f6" class="graf graf--h4 graf-after--p">Full circle</h4><p name="11be" id="11be" class="graf graf--p graf-after--h4">Which makes this a double-circular argument. The reason to use Kubernetes is to efficiently utilise a large, fixed pool of resource. Cloud compute is not a fixed pool of resource. Autoscaling is key to efficiently using cloud. The original reason to use Kubernetes was efficiency. Check mate 1.</p><p name="0692" id="0692" class="graf graf--p graf-after--p">Building one large platform for your entire organisation’s IT estate is risky and hard to do well if you don’t have massive resources to invest. So you divide it into smaller platforms, which makes each platform untenably large and complex, relative to the workload running on it. It’s like bringing an aircraft carrier to a boating lake. A lot of bread to chow for just a lick of jam. Check mate 2.</p><p name="befc" id="befc" class="graf graf--p graf-after--p">It’s catch-22: if efficiency is catered for by autoscaling and limiting blast-radius by running multiple platforms means you actually need a simpler platform, then what is Kubernetes good for?</p><h4 name="f22e" id="f22e" class="graf graf--h4 graf-after--p">The right tool for the job</h4><p name="eddf" id="eddf" class="graf graf--p graf-after--h4">There is a problem that Kubernetes solves well. The questions you need to ask yourself are whether you have that problem, and whether that’s a good problem to have.</p><p name="ddd0" id="ddd0" class="graf graf--p graf-after--p">I’ve worked on a handful of projects where the product or service consisted of a handful of microservices. At this scale it’s actually better to go with a more basic approach. Kubernetes is unlikely to be a boost to productivity, at least not in the short term. <a href="https://twitter.com/davidcarboni/status/1060859879777275904" data-href="https://twitter.com/davidcarboni/status/1060859879777275904" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">It’s more likely to swallow a disproportionate amount of your team’s attention</a> and leave you with little actual progress towards what could have been a relatively quick win.</p><p name="71e1" id="71e1" class="graf graf--p graf-after--p">So, what’s the problem that Kubernetes solves well? If you’re building a single product or service with tens or hundreds of microservices, then you probably do have a Kubernetes-sized problem. The investment may be worth it. On the other hand you may also have a design problem: a single system with that many moving parts could be doing too much or may simply be over-engineered.</p><h4 name="72bf" id="72bf" class="graf graf--h4 graf-after--p">Imagining an alternative</h4><p name="1a96" id="1a96" class="graf graf--p graf-after--h4">Don’t get me wrong, I like Kubernetes more than I’d like to. I’ve spent time with it and got to know it. What it does, in theory at least, is smart and needed. Who it works for and at what scale however, I’m still trying to find a good answer for. At least, one I can believe in.</p><p name="27b5" id="27b5" class="graf graf--p graf-after--p">Realistically, it’s not a bad least-worst solution, but be under no illusions: it’s slow to learn, complicated to work with, and the scale of it means your team will never fully understand it or get their arms around it. There are so many moving parts that, even statistically speaking, there will constantly be bugs and security vulnerabilities. It’s the J2EE of the container world and I don’t see that it’s got meaningful competition yet.</p><p name="0795" id="0795" class="graf graf--p graf-after--p">I’ll offer a closing idea. Introducing “name-driven development”, where there’s nothing more than a name for an imagined product, but that name paints a picture. It’s called <a href="https://en.wikipedia.org/wiki/Coracle" data-href="https://en.wikipedia.org/wiki/Coracle" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">Coracle</a>. The container world, from Docker to Kubernetes, is marine-themed so, sticking with that, a coracle is a minimum viable boat. Its simple construction is lightweight, portable and will carry one person. It’s intentionally not designed for scale, it’s designed to carry one load, conveniently and with a minimum of fuss. I think it speaks of a genuinely useful alternative.</p><blockquote name="f09e" id="f09e" class="graf graf--blockquote graf-after--p graf--trailing">Kubernetes will I’m sure continue as the enterprise darling. The hard question is whether it answers the right question. I’d like to know if it does.</blockquote></div></div></section>
</section>
<footer><p>By <a href="https://medium.com/@davidcarboni" class="p-author h-card">David Carboni</a> on <a href="https://medium.com/p/a9a28f3fca33"><time class="dt-published" datetime="2018-11-15T08:31:01.866Z">November 15, 2018</time></a>.</p><p><a href="https://medium.com/@davidcarboni/the-kubernetes-conundrum-a9a28f3fca33" class="p-canonical">Canonical link</a></p><p>Exported from <a href="https://medium.com">Medium</a> on May 3, 2019.</p></footer></article></body></html>